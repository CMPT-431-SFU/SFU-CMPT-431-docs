



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
        <meta name="author" content="Arrvindh Shriraman">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.3">
    
    
      
        <title>SFU CMPT 431 sec5 c profiling - SFU CMPT 431 Parallel and Distributed Systems</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#section-5-c-profiling" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="SFU CMPT 431 Parallel and Distributed Systems" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              SFU CMPT 431 Parallel and Distributed Systems
            </span>
            <span class="md-header-nav__topic">
              
                SFU CMPT 431 sec5 c profiling
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/SFU-CMPT-431/SFU-CMPT-431-docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    SFU-CMPT-431/SFU-CMPT-431-docs
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../SFU-CMPT-431-T01-intro-c/" class="md-tabs__link">
          Topic Notes
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../SFU-CMPT-431-sec1-linux/" class="md-tabs__link">
          Section Notes
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="SFU CMPT 431 Parallel and Distributed Systems" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    SFU CMPT 431 Parallel and Distributed Systems
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/SFU-CMPT-431/SFU-CMPT-431-docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    SFU-CMPT-431/SFU-CMPT-431-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Topic Notes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Topic Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../SFU-CMPT-431-T01-intro-c/" title="Topic 1: Introduction to C" class="md-nav__link">
      Topic 1: Introduction to C
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Section Notes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Section Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../SFU-CMPT-431-sec1-linux/" title="Section 1: Linux Development Environment" class="md-nav__link">
      Section 1: Linux Development Environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SFU-CMPT-431-sec2-c-basics/" title="Section 2: Compiling and Running C Programs" class="md-nav__link">
      Section 2: Compiling and Running C Programs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SFU-CMPT-431-sec3-c-build-test/" title="Section 3: C Build and Test Frameworks" class="md-nav__link">
      Section 3: C Build and Test Frameworks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SFU-CMPT-431-sec4-c-test-debug/" title="Section 4: C Testing and Debugging" class="md-nav__link">
      Section 4: C Testing and Debugging
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-warmup-implement-array-average-functions" class="md-nav__link">
    1. Warmup: Implement Array Average Functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-measuring-execution-time" class="md-nav__link">
    2. Measuring Execution Time
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-profiling-execution-time" class="md-nav__link">
    3. Profiling Execution Time
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/SFU-CMPT-431/SFU-CMPT-431-docs/edit/master/docs/SFU-CMPT-431-sec5-c-profiling.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="section-5-c-profiling">Section 5: C Profiling<a class="headerlink" href="#section-5-c-profiling" title="Permanent link">&para;</a></h1>
<p>In this discussion, we will explore how to measure the performance of
a C evaluation program.</p>
<p>Follow the same process as in the previous discussion section. You need
to login to a workstation with your NetID and password. Start a terminal
and then don't forget to source the setup script!</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>% <span class="nb">source</span> setup-SFU-CMPT-431.sh
</pre></div>
</td></tr></table>

<p>Now clone the github repo for this discussion section. No need to fork
the repo, just clone it.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>% mkdir -p <span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/SFU-CMPT-431
% <span class="nb">cd</span> <span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/SFU-CMPT-431
% git clone git@github.com:cornell-SFU-CMPT-431/ece2400-sec5-c-profiling sec5
% <span class="nb">cd</span> sec5
% ls
</pre></div>
</td></tr></table>

<h2 id="1-warmup-implement-array-average-functions">1. Warmup: Implement Array Average Functions<a class="headerlink" href="#1-warmup-implement-array-average-functions" title="Permanent link">&para;</a></h2>
<p>Take a look at the <code>array-eval.c</code> source file. You will see four
functions:</p>
<ul>
<li><code>init_array</code> : initialize an array of integers with random values</li>
<li><code>avg_array</code> : find average of an array of integers</li>
<li><code>init_parray</code> : initialize an array of pointers to integers</li>
<li><code>avg_parray</code> : find average of an array of pointers to integers</li>
</ul>
<p>The first two functions operate on an array of integers, while the second
two functions operate on an array of <em>pointers</em> to integers. Start by
sketching a state diagram for the given main program assuming <code>size</code> is
set to 3. Work through the state diagram and stop when you get to the
call to the <code>avg_array</code> function. Use this state diagram to understand
the difference between the array of integers vs. the array of pointers to
integers.</p>
<p>Now implement the <code>avg_array</code> function which should find the average of
the integers stored in the given array. Then implement the <code>avg_parray</code>
function which should find the average of the integers <em>pointed to</em> by
the given array. Compile and execute your program a couple of times,
changing the seed passed into <code>srand</code> each time. Verify that the value
returned by <code>avg_array</code> always equals the value returned by <code>avg_parray</code>
and that the average is always around 500.</p>
<h2 id="2-measuring-execution-time">2. Measuring Execution Time<a class="headerlink" href="#2-measuring-execution-time" title="Permanent link">&para;</a></h2>
<p>Now assume we want to quantitatively measure how long it takes to
initialize both arrays and then calculate the averages. To do this, we
can use the time functions provided by the C standard library in the
<code>sys/time.h</code> header file. Go ahead and add the following header to your
evaluation program:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;sys/time.h&gt;</span><span class="cp"></span>
</pre></div>
</td></tr></table>

<p>We can use the <code>gettimeofday</code> function to get the current time:</p>
<ul>
<li><a href="http://man7.org/linux/man-pages/man2/gettimeofday.2.html">http://man7.org/linux/man-pages/man2/gettimeofday.2.html</a></li>
</ul>
<p>This function takes as a parameter a pointer to a struct of type <code>struct
timeval</code>. It uses call-by-pointer semantics to update this struct with
the current time with a precision of 10s of microseconds. The struct has
two fields: <code>tv_sec</code> is the number of seconds and <code>tv_usec</code> is the number
of microseconds since January 1, 1970. We can use <code>gettimeofday</code> like
this to quantitatively measure how long it takes to run an experiment.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1">// Track time using timers</span>

<span class="k">struct</span> <span class="n">timeval</span> <span class="n">start</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">timeval</span> <span class="n">end</span><span class="p">;</span>

<span class="c1">// Start tracking time</span>

<span class="n">gettimeofday</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">start</span><span class="p">,</span> <span class="nb">NULL</span> <span class="p">);</span>

<span class="c1">// Run the experiment</span>

<span class="c1">// ...</span>

<span class="c1">// Stop tracking time</span>

<span class="n">gettimeofday</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">end</span><span class="p">,</span> <span class="nb">NULL</span> <span class="p">);</span>

<span class="c1">// Calculate elapsed time</span>

<span class="kt">double</span> <span class="n">elapsed</span> <span class="o">=</span> <span class="p">(</span> <span class="n">end</span><span class="p">.</span><span class="n">tv_sec</span> <span class="o">-</span> <span class="n">start</span><span class="p">.</span><span class="n">tv_sec</span> <span class="p">)</span> <span class="o">+</span>
               <span class="p">(</span> <span class="p">(</span> <span class="n">end</span><span class="p">.</span><span class="n">tv_usec</span> <span class="o">-</span> <span class="n">start</span><span class="p">.</span><span class="n">tv_usec</span> <span class="p">)</span> <span class="o">/</span> <span class="mf">1000000.0</span> <span class="p">);</span>

<span class="n">printf</span><span class="p">(</span> <span class="s">&quot;Elapsed time for trial is %f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">elapsed</span> <span class="p">);</span>
</pre></div>
</td></tr></table>

<p>Modify the evaluation program to measure how long one experiment takes.
You will notice that the execution time is very short ... so short that
it is too fast for the resolution of the timer. We need to run a subtrial
in a loop many times to make sure we have a long enough experiment that
we can get a reasonable accurate time measurement. Put the subtrial in a
loop like this:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">y</span><span class="p">;</span>

<span class="k">for</span> <span class="p">(</span> <span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">100000</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>

  <span class="kt">int</span> <span class="n">array</span><span class="p">[</span><span class="n">size</span><span class="p">];</span>
  <span class="n">init_array</span><span class="p">(</span> <span class="n">array</span><span class="p">,</span> <span class="n">size</span> <span class="p">);</span>

  <span class="kt">int</span><span class="o">*</span> <span class="n">parray</span><span class="p">[</span><span class="n">size</span><span class="p">];</span>
  <span class="n">init_parray</span><span class="p">(</span> <span class="n">parray</span><span class="p">,</span> <span class="n">array</span><span class="p">,</span> <span class="n">size</span> <span class="p">);</span>

  <span class="n">x</span> <span class="o">=</span> <span class="n">avg_array</span><span class="p">(</span> <span class="n">array</span><span class="p">,</span> <span class="n">size</span> <span class="p">);</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">avg_parray</span><span class="p">(</span> <span class="n">parray</span><span class="p">,</span> <span class="n">size</span> <span class="p">);</span>

<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>Your program should now run for a couple of seconds and this should
enable a much more precise time measurement. Try running the program at
least five times and write down the results for each trial. Is the
execution time always the same? If not, why not?</p>
<p>We need to do several trials and then take the average execution time to
ensure we can get a good estimate of the execution time. Restructure your
evaluation program to look like this:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>int main( void)
{
  int ntrials    = 5;
  int nsubtrials = 1e5;

  double elapsed_avg = 0.0;

  for ( int i = 0; i &lt; ntrials; i++ ) {

    // Track time using timers

    struct timeval start;
    struct timeval end;

    // Start tracking time

    gettimeofday( &amp;start, NULL );

    // Run the experiment

    for ( int j = 0; j &lt; nsubtrials; j++ ) {

      // ... run one trial ...

    }

    // Stop tracking time

    gettimeofday( &amp;end, NULL );

    // Calculate elapsed time

    double elapsed = ( end.tv_sec - start.tv_sec ) +
                   ( ( end.tv_usec - start.tv_usec ) / 1000000.0 );

    elapsed_avg += elapsed;

    printf( &quot;Elapsed time for trial %d is %f\n&quot;, i, elapsed );
  }

  // Calculate average elapsed time per trial

  elapsed_avg = elapsed_avg / ntrials;

  printf( &quot;Elapsed time (averaged) is %f\n&quot;, elapsed_avg );
}
</pre></div>
</td></tr></table>

<p>Now use your evaluation program to quantitatively measure the execution
time of this experiment.</p>
<h2 id="3-profiling-execution-time">3. Profiling Execution Time<a class="headerlink" href="#3-profiling-execution-time" title="Permanent link">&para;</a></h2>
<p>The previous section enables us to measure the overall execution time,
but we might also be interested to know which functions are taking the
most time. This can help us focus on the important hotspots for
optimization. We can use <em>profiling</em> to do this kind of performance
analysis. We will look at two profiling tools: <code>gprof</code> and <code>perf</code>.</p>
<p>Let's start by recompiling our program with support for profiling:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>% <span class="nb">cd</span> <span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/SFU-CMPT-431/sec5
% gcc -Wall -pg -o array-eval array-eval.c
</pre></div>
</td></tr></table>

<p>Notice the <code>-pg</code> command line option. This tells GCC to enable support
for profiling. Now we run the program and use the <code>gprof</code> tool to analyze
the execution time:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>% <span class="nb">cd</span> <span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/SFU-CMPT-431/sec5
% ./array-eval
% gprof ./array-eval
</pre></div>
</td></tr></table>

<p>The output will have two parts: a flat profile and a call graph profile.
The flat profile specifies how many times each function was called and
how much time was spent in each function. The call graph profile
additionally indicates what exact sequence of function calls led let to a
specific function call, and how much time was spent in that specific
function call. Why do you think more time is spent in <code>init_array</code>?</p>
<p>Let's now use a different tool called <code>perf</code>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>% <span class="nb">cd</span> <span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/SFU-CMPT-431/sec5
% perf record ./array-eval
% perf report --stdio
</pre></div>
</td></tr></table>

<p>The output will show a flat profile, but it also includes how much time
was spent in various functions contained in the standard C library. Does
this information help explain why more time is spent in <code>init_array</code>?</p>
<p>We can use these profiling tools to help identify hotspots in our code
for optimization. Hotspots might be due to a small function which is
called many, many times, or a function which is only called a few times
but takes a very long time to execute.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright for original site &copy; 2018 Christopher Batten
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.ac79c3b0.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
        <script src="../js/extras.js"></script>
      
    
  </body>
</html>